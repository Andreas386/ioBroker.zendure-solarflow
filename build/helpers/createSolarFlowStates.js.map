{
  "version": 3,
  "sources": ["../../src/helpers/createSolarFlowStates.ts"],
  "sourcesContent": ["/* eslint-disable @typescript-eslint/indent */\r\n\r\nimport { ZendureSolarflow } from \"../main\";\r\nimport { createCalculationStates } from \"./createCalculationStates\";\r\nimport { createControlStates } from \"./createControlStates\";\r\n//import { deleteCalculationStates } from \"./deleteCalculationStates\";\r\n\r\nexport const createSolarFlowStates = async (\r\n  adapter: ZendureSolarflow,\r\n  productKey: string,\r\n  deviceKey: string,\r\n): Promise<void> => {\r\n  productKey = productKey.replace(adapter.FORBIDDEN_CHARS, \"\");\r\n  deviceKey = deviceKey.replace(adapter.FORBIDDEN_CHARS, \"\");\r\n\r\n  // Create device (e.g. the product type -> SolarFlow)\r\n  await adapter?.extendObjectAsync(productKey, {\r\n    type: \"device\",\r\n    common: {\r\n      name: { de: \"Produkt \" + productKey, en: \"Product \" + productKey },\r\n    },\r\n    native: {},\r\n  });\r\n\r\n  // Create channel (e.g. the device specific key)\r\n  await adapter?.extendObjectAsync(productKey + \".\" + deviceKey, {\r\n    type: \"channel\",\r\n    common: {\r\n      name: { de: \"Device Key \" + deviceKey, en: \"Device Key \" + deviceKey },\r\n    },\r\n    native: {},\r\n  });\r\n\r\n  // Create calculations folder\r\n  await adapter?.extendObjectAsync(\r\n    productKey + \".\" + deviceKey + \".calculations\",\r\n    {\r\n      type: \"channel\",\r\n      common: {\r\n        name: {\r\n          de: \"Berechnungen f\u00FCr Ger\u00E4t \" + deviceKey,\r\n          en: \"Calculations for Device \" + deviceKey,\r\n        },\r\n      },\r\n      native: {},\r\n    },\r\n  );\r\n\r\n  // Create pack data folder\r\n  await adapter?.extendObjectAsync(productKey + \".\" + deviceKey + \".packData\", {\r\n    type: \"channel\",\r\n    common: {\r\n      name: {\r\n        de: \"Akku Packs\",\r\n        en: \"Battery packs\",\r\n      },\r\n    },\r\n    native: {},\r\n  });\r\n\r\n  await adapter?.extendObjectAsync(\r\n    productKey + \".\" + deviceKey + \".\" + \"lastUpdate\",\r\n    {\r\n      type: \"state\",\r\n      common: {\r\n        name: { de: \"Letztes Update\", en: \"Last Update\" },\r\n        type: \"number\",\r\n        desc: \"lastUpdate\",\r\n        role: \"value.time\",\r\n        read: true,\r\n        write: false,\r\n      },\r\n      native: {},\r\n    },\r\n  );\r\n\r\n  await adapter?.extendObjectAsync(\r\n    productKey + \".\" + deviceKey + \".\" + \"electricLevel\",\r\n    {\r\n      type: \"state\",\r\n      common: {\r\n        name: { de: \"SOC Gesamtsystem\", en: \"SOC of the system\" },\r\n        type: \"number\",\r\n        desc: \"electricLevel\",\r\n        role: \"value.battery\",\r\n        read: true,\r\n        write: false,\r\n        unit: \"%\",\r\n      },\r\n      native: {},\r\n    },\r\n  );\r\n\r\n  await adapter?.extendObjectAsync(\r\n    productKey + \".\" + deviceKey + \".\" + \"outputHomePower\",\r\n    {\r\n      type: \"state\",\r\n      common: {\r\n        name: { de: \"Ausgangsleistung\", en: \"output power\" },\r\n        type: \"number\",\r\n        desc: \"outputHomePower\",\r\n        role: \"value.power\",\r\n        read: true,\r\n        write: false,\r\n        unit: \"W\",\r\n      },\r\n      native: {},\r\n    },\r\n  );\r\n\r\n  await adapter?.extendObjectAsync(\r\n    productKey + \".\" + deviceKey + \".\" + \"outputLimit\",\r\n    {\r\n      type: \"state\",\r\n      common: {\r\n        name: { de: \"Limit der Ausgangsleistung\", en: \"limit of output power\" },\r\n        type: \"number\",\r\n        desc: \"outputLimit\",\r\n        role: \"value.power\",\r\n        read: true,\r\n        write: false,\r\n        unit: \"W\",\r\n      },\r\n      native: {},\r\n    },\r\n  );\r\n\r\n  await adapter?.extendObjectAsync(\r\n    productKey + \".\" + deviceKey + \".\" + \"outputPackPower\",\r\n    {\r\n      type: \"state\",\r\n      common: {\r\n        name: { de: \"Ladeleistung zum Akku\", en: \"charge power\" },\r\n        type: \"number\",\r\n        desc: \"outputPackPower\",\r\n        role: \"value.power\",\r\n        read: true,\r\n        write: false,\r\n        unit: \"W\",\r\n      },\r\n      native: {},\r\n    },\r\n  );\r\n\r\n  await adapter?.extendObjectAsync(\r\n    productKey + \".\" + deviceKey + \".\" + \"packInputPower\",\r\n    {\r\n      type: \"state\",\r\n      common: {\r\n        name: { de: \"Entladeleistung zum Akku\", en: \"discharge power\" },\r\n        type: \"number\",\r\n        desc: \"packInputPower\",\r\n        role: \"value.power\",\r\n        read: true,\r\n        write: false,\r\n        unit: \"W\",\r\n      },\r\n      native: {},\r\n    },\r\n  );\r\n\r\n  await adapter?.extendObjectAsync(\r\n    productKey + \".\" + deviceKey + \".\" + \"solarInputPower\",\r\n    {\r\n      type: \"state\",\r\n      common: {\r\n        name: { de: \"Leistung der Solarmodule\", en: \"solar power\" },\r\n        type: \"number\",\r\n        desc: \"solarInputPower\",\r\n        role: \"value.power\",\r\n        read: true,\r\n        write: false,\r\n        unit: \"W\",\r\n      },\r\n      native: {},\r\n    },\r\n  );\r\n\r\n  await adapter?.extendObjectAsync(\r\n    productKey + \".\" + deviceKey + \".\" + \"pvPower1\",\r\n    {\r\n      type: \"state\",\r\n      common: {\r\n        name: { de: \"Leistung PV 1\", en: \"solar power channel 1\" },\r\n        type: \"number\",\r\n        desc: \"pvPower1\",\r\n        role: \"value.power\",\r\n        read: true,\r\n        write: false,\r\n        unit: \"W\",\r\n      },\r\n      native: {},\r\n    },\r\n  );\r\n\r\n  await adapter?.extendObjectAsync(\r\n    productKey + \".\" + deviceKey + \".\" + \"pvPower2\",\r\n    {\r\n      type: \"state\",\r\n      common: {\r\n        name: { de: \"Leistung PV 2\", en: \"solar power channel 2\" },\r\n        type: \"number\",\r\n        desc: \"pvPower2\",\r\n        role: \"value.power\",\r\n        read: true,\r\n        write: false,\r\n        unit: \"W\",\r\n      },\r\n      native: {},\r\n    },\r\n  );\r\n\r\n  await adapter?.extendObjectAsync(\r\n    productKey + \".\" + deviceKey + \".\" + \"remainInputTime\",\r\n    {\r\n      type: \"state\",\r\n      common: {\r\n        name: { de: \"Erwartete Ladedauer\", en: \"remaining charge time\" },\r\n        type: \"number\",\r\n        desc: \"remainInputTime\",\r\n        role: \"value.interval\",\r\n        read: true,\r\n        write: false,\r\n      },\r\n      native: {},\r\n    },\r\n  );\r\n\r\n  await adapter?.extendObjectAsync(\r\n    productKey + \".\" + deviceKey + \".\" + \"remainOutTime\",\r\n    {\r\n      type: \"state\",\r\n      common: {\r\n        name: {\r\n          de: \"Erwartete Entladedauer (Minuten)\",\r\n          en: \"remaining discharge time (minutes)\",\r\n        },\r\n        type: \"number\",\r\n        desc: \"remainOutTime\",\r\n        role: \"value.interval\",\r\n        read: true,\r\n        write: false,\r\n      },\r\n      native: {},\r\n    },\r\n  );\r\n\r\n  await adapter?.extendObjectAsync(\r\n    productKey + \".\" + deviceKey + \".\" + \"socSet\",\r\n    {\r\n      type: \"state\",\r\n      common: {\r\n        name: { de: \"Max. SOC\", en: \"max. SOC\" },\r\n        type: \"number\",\r\n        desc: \"socSet\",\r\n        role: \"value.battery\",\r\n        read: true,\r\n        write: false,\r\n        unit: \"%\",\r\n      },\r\n      native: {},\r\n    },\r\n  );\r\n\r\n  await adapter?.extendObjectAsync(\r\n    productKey + \".\" + deviceKey + \".\" + \"minSoc\",\r\n    {\r\n      type: \"state\",\r\n      common: {\r\n        name: { de: \"Min. SOC\", en: \"min. SOC\" },\r\n        type: \"number\",\r\n        desc: \"minSoc\",\r\n        role: \"value.battery\",\r\n        read: true,\r\n        write: false,\r\n        unit: \"%\",\r\n      },\r\n      native: {},\r\n    },\r\n  );\r\n\r\n  // Subscibe to State updates to listen to changes\r\n  adapter?.subscribeStates(\r\n    productKey + \".\" + deviceKey + \".\" + \"solarInputPower\",\r\n  );\r\n\r\n  adapter?.subscribeStates(\r\n    productKey + \".\" + deviceKey + \".\" + \"outputPackPower\",\r\n  );\r\n\r\n  adapter?.subscribeStates(\r\n    productKey + \".\" + deviceKey + \".\" + \"packInputPower\",\r\n  );\r\n\r\n  adapter?.subscribeStates(\r\n    productKey + \".\" + deviceKey + \".\" + \"outputHomePower\",\r\n  );\r\n\r\n  await createControlStates(adapter, productKey, deviceKey);\r\n\r\n  if (adapter.config.useCalculation) {\r\n    await createCalculationStates(adapter, productKey, deviceKey);\r\n  } else {\r\n    //await deleteCalculationStates(adapter, productKey, deviceKey);\r\n  }\r\n};\r\n"],
  "mappings": "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",
  "names": []
}
